/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => animeToObsidian
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// settings.ts
var import_obsidian2 = require("obsidian");

// filefinder.ts
var import_obsidian = require("obsidian");
var maxDepth = 100;
function ls(app, asked, currentFolder = app.vault.getRoot(), currentDepth = 0) {
  let listOfFiles = [];
  if (currentDepth > maxDepth) {
    return listOfFiles;
  }
  currentFolder.children.forEach((file) => {
    if (file instanceof import_obsidian.TFolder) {
      if (asked === "folder" || asked === "all" || asked === void 0) {
        listOfFiles.push(file.path);
      }
      listOfFiles = listOfFiles.concat(ls(app, asked, file, currentDepth + 1));
    } else if (file instanceof import_obsidian.TFile) {
      if (asked === "file" || asked === "all" || asked === void 0) {
        listOfFiles.push(file.path);
      }
    }
  });
  return listOfFiles;
}

// settings.ts
var translations = {
  en: {
    basePath: "Base Path",
    basePathDesc: "The base path for your anime list",
    checklist: "Checklist",
    checklistDesc: "Do you want to list your anime?",
    checklistPath: "Checklist Path",
    checklistPathDesc: "The path where you want to checklist your anime",
    selectBasePath: "Select a base path",
    selectListPath: "Select a list path",
    listname: "anime list"
  },
  fr: {
    basePath: "Chemin de base",
    basePathDesc: "Le chemin de base pour votre liste d'anime",
    checklist: "Liste des animes",
    checklistDesc: "Voulez-vous lister vos animes dans un fichier ?",
    checklistPath: "Chemin de la liste",
    checklistPathDesc: "Le chemin o\xF9 vous voulez lister vos animes",
    selectBasePath: "S\xE9lectionnez un chemin de base",
    selectListPath: "S\xE9lectionnez un chemin de liste",
    listname: "liste d'anime"
  }
};
var currentlang = moment.locale();
if (currentlang !== "en" && currentlang !== "fr") {
  currentlang = "en";
}
function t(key) {
  const translation = translations[currentlang][key] || translations["en"][key];
  return translation || key;
}
var DEFAULT_SETTINGS = {
  basePath: "",
  list: false,
  listPath: "",
  animes_history: [],
  listname: t("listname")
};
var animeToObsidianSettingsTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    let { containerEl } = this;
    containerEl.empty();
    const options = ls(this.app, "folder");
    new import_obsidian2.Setting(containerEl).setName(t("basePath")).setDesc(t("basePathDesc")).addDropdown((dropdown) => {
      dropdown.addOption("", t("selectBasePath"));
      options.forEach((option) => {
        dropdown.addOption(option, option);
      });
      dropdown.setValue(this.plugin.settings.basePath);
      dropdown.onChange(async (value) => {
        this.plugin.settings.basePath = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian2.Setting(containerEl).setName(t("checklist")).setDesc(t("checklistDesc")).addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.list);
      toggle.onChange(async (value) => {
        this.plugin.settings.list = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian2.Setting(containerEl).setName(t("checklistPath")).setDesc(t("checklistPathDesc")).addDropdown((dropdown) => {
      dropdown.addOption("", t("selectListPath"));
      options.forEach((option) => {
        dropdown.addOption(option, option);
      });
      dropdown.setValue(this.plugin.settings.listPath);
      dropdown.onChange(async (value) => {
        this.plugin.settings.listPath = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian2.Setting(containerEl).setName(t("listname")).setDesc(t("listname")).addText((text) => text.setPlaceholder(t("listname")).setValue(this.plugin.settings.listname).onChange(async (value) => {
      this.plugin.settings.listname = value;
      await this.plugin.saveSettings();
    }));
  }
};

// main.ts
var translations2 = {
  en: {
    addPageTitle: "Add a page for an anime",
    submitButton: "Submit",
    animeHistory: "Anime History",
    animeHistoryDescription1: "this page is for managing your anime list save (the one that can be use when building the checklist)",
    animeHistoryDescription2: "warning : the cross doesn't delete the file but delete the anime name in your history",
    createlist: "Create the list",
    noListError: "you need to enable the list in the settings or create it with the command 'create-anime-list'"
  },
  fr: {
    addPageTitle: "Ajouter une page pour un anime",
    submitButton: "Soumettre",
    animeHistory: "Historique des animes",
    animeHistoryDescription1: "cette page est pour g\xE9rer votre historique de liste d'anime (celui qui peut \xEAtre utilis\xE9 lors de la construction de la liste)",
    animeHistoryDescription2: "attention : la croix ne supprime pas le fichier mais supprime le nom de l'anime dans votre historique",
    createlist: "Cr\xE9er la liste",
    noListError: "vous devez activer la liste dans les param\xE8tres ou la cr\xE9er avec la commande 'create-anime-list'"
  }
};
var currentlang2 = moment.locale();
if (currentlang2 !== "en" && currentlang2 !== "fr") {
  currentlang2 = "en";
}
function t2(key) {
  const translation = translations2[currentlang2][key] || translations2["en"][key];
  return translation || key;
}
var aditionaltags = {
  tags: ["anime", "culture"]
};
var TextPromptModal = class extends import_obsidian3.Modal {
  constructor(app) {
    super(app);
    this.text = "";
  }
  onOpen() {
    let { contentEl } = this;
    let title = contentEl.createEl("h2");
    title.textContent = t2("addPageTitle");
    let textInput = contentEl.createEl("input", { type: "text" });
    textInput.addEventListener("input", () => {
      this.text = textInput.value;
    });
    let submitButton = contentEl.createEl("button", { cls: "mod-cta" });
    submitButton.textContent = t2("submitButton");
    submitButton.addEventListener("click", () => {
      this.close();
      if (this.resolver) {
        this.resolver(this.text);
      }
    });
  }
  onClose() {
    let { contentEl } = this;
    contentEl.empty();
  }
  // Ajouter une mÃ©thode pour obtenir la valeur de la zone de texte
  getValue() {
    return new Promise((resolve) => {
      this.resolver = resolve;
    });
  }
};
var animeText = class {
  constructor() {
  }
  createText(animeData, animeName, aditionaltags2) {
    let text = "";
    text += "---\n" + this.createTags(animeData, animeName, aditionaltags2) + "---\n";
    text += `# description: 
 ${animeData.synopsis}
`;
    return text;
  }
  createTags(data, animeName, aditionaltags2) {
    let tags = "tags:\n";
    tags += `  - ${spaceremover(animeName)}
`;
    aditionaltags2.tags.forEach((element) => {
      element = spaceremover(element);
      tags += `  - ${element}
`;
    });
    data.genres.forEach((element) => {
      tags += `  - ${element.name}
`;
    });
    data.themes.forEach((element) => {
      tags += `  - ${element.name}
`;
    });
    data.demographics.forEach((element) => {
      tags += `  - ${element.name}
`;
    });
    return tags;
  }
};
var AnimeHistoryMoldal = class extends import_obsidian3.Modal {
  constructor(app, plugin) {
    super(app);
    this.modalEl.addClass("anime-history-modal");
    this.plugin = plugin;
  }
  onOpen() {
    let { contentEl } = this;
    let title = contentEl.createEl("h2");
    title.textContent = t2("animeHistory");
    let description = contentEl.createEl("p", { cls: "description" });
    description.textContent = t2("animeHistoryDescription1");
    description = contentEl.createEl("p", { cls: "avertissement" });
    description.textContent = t2("animeHistoryDescription2");
    let list = contentEl.createEl("ul");
    let history = this.plugin.settings.anime_history || [];
    history.forEach((item) => {
      let listItem = list.createEl("li", { cls: "history-item" });
      listItem.textContent = item + " ";
      let deleteButton = listItem.createEl("button", { cls: "delete-button" });
      deleteButton.textContent = "X";
      deleteButton.addEventListener("click", () => {
        const index = history.indexOf(item);
        if (index > -1) {
          history.splice(index, 1);
        }
        this.plugin.saveSettings();
        contentEl.empty();
        this.onOpen();
      });
    });
  }
  onClose() {
    let { contentEl } = this;
    contentEl.empty();
  }
};
var animeToObsidian = class extends import_obsidian3.Plugin {
  async onload() {
    await this.loadSettings();
    this.addCommand({
      id: "open-anime-history",
      name: t2("animeHistory"),
      callback: async () => {
        let modal = new AnimeHistoryMoldal(this.app, this);
        modal.open();
      }
    });
    this.addCommand({
      id: "create-anime-list",
      name: t2("createlist"),
      callback: async () => {
        if (!this.settings.list) {
          new import_obsidian3.Notice("you need to enable the list in the settings");
          return;
        }
        let filePath = this.settings.listPath + "/" + this.settings.listname + ".md";
        if (await this.app.vault.adapter.exists(filePath)) {
          new import_obsidian3.Notice("File already exists. Deleting the existing file.");
          await this.app.vault.adapter.remove(filePath);
        }
        let history = this.settings.anime_history || [];
        let text = "";
        history.forEach((element) => {
          text += `- [ ] [[${element}]]
`;
        });
        let file = await this.app.vault.create(this.settings.listPath + "/" + this.settings.listname + ".md", text);
        let leaf = this.app.workspace.getLeaf();
        await leaf.openFile(file);
      }
    });
    this.addCommand({
      id: "submit-anime",
      name: t2("addPageTitle"),
      callback: async () => {
        let modal = new TextPromptModal(this.app);
        modal.open();
        let value = await modal.getValue();
        if (value != "") {
          const history = this.settings.anime_history || [];
          history.push(value);
          this.settings.anime_history = history;
          await this.saveSettings();
          if (this.settings.list && await this.app.vault.adapter.exists(this.settings.listPath + "/" + this.settings.listname + ".md")) {
            let file2 = await this.app.vault.getAbstractFileByPath(this.settings.listPath + "/" + this.settings.listname + ".md");
            let content = await this.app.vault.read(file2);
            content += `- [ ] [[${value}]]
`;
            await this.app.vault.modify(file2, content);
          } else {
            new import_obsidian3.Notice(t2("noListError"));
          }
          let filePath = this.settings.basePath + "/" + value + ".md";
          let file = await this.app.vault.create(filePath, "");
          let leaf = this.app.workspace.getLeaf();
          await leaf.openFile(file);
          if (leaf.view instanceof import_obsidian3.MarkdownView) {
            let editor = leaf.view.editor;
            let text = new animeText();
            editor.setValue(text.createText(await getAnimeData(value), value, aditionaltags));
          }
        } else {
          new import_obsidian3.Notice("did you type nothing ? (error : variable is empty)");
        }
      }
    });
    this.addSettingTab(new animeToObsidianSettingsTab(this.app, this));
  }
  async onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
function spaceremover(text) {
  let newtext = "";
  for (let i = 0; i < text.length; i++) {
    if (text[i] == " ") {
      newtext += "_";
    } else {
      newtext += text[i];
    }
  }
  return newtext;
}
async function getAnimeData(animeName) {
  const request = {
    url: `https://api.jikan.moe/v4/anime?q=${animeName}&limit=1`,
    method: "GET"
  };
  try {
    const response = await (0, import_obsidian3.requestUrl)(request);
    if (response.status !== 200) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    return response.json.data[0];
  } catch (error) {
    console.error(`Failed to fetch anime data: ${error.message}`);
  }
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzZXR0aW5ncy50cyIsICJmaWxlZmluZGVyLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvKlxyXG5hbmltZSB0byBvYnNpZGlhbiBwbHVnaW4gYnkgeG1vbmNvY294XHJcbmlzIGEgcGx1Z2luIHdobyB0YWtlIGRhdGEgZnJvbSBqaWlrYW4gYXBpIGFuZCBjcmVhdGUgYSBwYWdlIHdpdGggdGhlIGRhdGFcclxuYydlc3QgdW4gcGx1Z2luIHF1aSBwcmVuZCBsZXMgZG9ublx1MDBFOWVzIGRlIGwnYXBpIGppa2FuIGV0IGNyXHUwMEU5ZSB1bmUgcGFnZSBhdmVjIGxlcyBkb25uXHUwMEU5ZXNcclxuXHJcbmhlbGxvIG5vdGUgZnJvbSB4bW9uY29jb3ggSSdtIGEgZnJlbmNoIHN0dWRlbnQgYW5kIGlzIHdoeSBteSBlbmdsaXNoIGlzIGJhZCBhbmQgYWxsIHRoZSBjb21tZW50IGFyZSBpbiBmcmVuY2guIGJ1dCB5b3UgY2FuJ3QgcGFzcyB0aGUgY29kZSB0byBhIHRyYW5zbGF0b3IgaWYgeW91IHdhbnQuXHJcbmJvbmpvdXIgbm90ZSBkZSB4bW9uY29jb3ggamUgc3VpcyB1biBcdTAwRTl0dWRpYW50IGZyYW5cdTAwRTdhaXMgbWFpcyBqJ2FpIGNvZFx1MDBFOSBhdmVjIGxlcyBcdTAwRTlsXHUwMEU5bWVudCBkZSBsJ3VpIGVuIGFuZ2xhaXMgbWFpcyBsZXMgY29tbWVudGFpcmVzIHNvbnQgZW4gZnJhblx1MDBFN2Fpcy4gdm91cyBwb3V2ZXogcGFzc2VyIGxlIGNvZGUgZGFucyB1biB0cmFkdWN0ZXVyIHNpIHZvdXMgdm91bGV6IChtYWlzIGVuIHZyYWkgc2kgdm91cyBcdTAwRUF0ZXMgbGEgYydlc3QgcXVlIHZvdXMgc2F2ZXogZFx1MDBFOWpcdTAwRTAgcGFybGVyIGFuZ2xhaXMpXHJcbiovXHJcblxyXG5pbXBvcnQgeyBQbHVnaW4sIE1vZGFsLCBURmlsZSwgVEZvbGRlciwgTm90aWNlLCByZXF1ZXN0VXJsLCBSZXF1ZXN0VXJsUGFyYW0sIE1hcmtkb3duVmlldyB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHthbmltZVRvT2JzaWRpYW5TZXR0aW5ncywgREVGQVVMVF9TRVRUSU5HUywgYW5pbWVUb09ic2lkaWFuU2V0dGluZ3NUYWJ9IGZyb20gJy4vc2V0dGluZ3MnO1xyXG5cclxuXHJcbmNvbnN0IHRyYW5zbGF0aW9ucyA9IHtcclxuICAgIGVuOiB7XHJcbiAgICAgIGFkZFBhZ2VUaXRsZTogXCJBZGQgYSBwYWdlIGZvciBhbiBhbmltZVwiLFxyXG4gICAgICBzdWJtaXRCdXR0b246IFwiU3VibWl0XCIsXHJcbiAgICAgIGFuaW1lSGlzdG9yeTogXCJBbmltZSBIaXN0b3J5XCIsXHJcbiAgICAgIGFuaW1lSGlzdG9yeURlc2NyaXB0aW9uMTpcInRoaXMgcGFnZSBpcyBmb3IgbWFuYWdpbmcgeW91ciBhbmltZSBsaXN0IHNhdmUgKHRoZSBvbmUgdGhhdCBjYW4gYmUgdXNlIHdoZW4gYnVpbGRpbmcgdGhlIGNoZWNrbGlzdClcIixcclxuICAgICAgYW5pbWVIaXN0b3J5RGVzY3JpcHRpb24yOiBcIndhcm5pbmcgOiB0aGUgY3Jvc3MgZG9lc24ndCBkZWxldGUgdGhlIGZpbGUgYnV0IGRlbGV0ZSB0aGUgYW5pbWUgbmFtZSBpbiB5b3VyIGhpc3RvcnlcIixcclxuICAgICAgY3JlYXRlbGlzdDogXCJDcmVhdGUgdGhlIGxpc3RcIixcclxuICAgICAgbm9MaXN0RXJyb3I6IFwieW91IG5lZWQgdG8gZW5hYmxlIHRoZSBsaXN0IGluIHRoZSBzZXR0aW5ncyBvciBjcmVhdGUgaXQgd2l0aCB0aGUgY29tbWFuZCAnY3JlYXRlLWFuaW1lLWxpc3QnXCJcclxuXHJcbiAgICB9LFxyXG4gICAgZnI6IHtcclxuICAgICAgYWRkUGFnZVRpdGxlOiBcIkFqb3V0ZXIgdW5lIHBhZ2UgcG91ciB1biBhbmltZVwiLFxyXG4gICAgICBzdWJtaXRCdXR0b246IFwiU291bWV0dHJlXCIsXHJcbiAgICAgIGFuaW1lSGlzdG9yeTogXCJIaXN0b3JpcXVlIGRlcyBhbmltZXNcIixcclxuICAgICAgYW5pbWVIaXN0b3J5RGVzY3JpcHRpb24xOlwiY2V0dGUgcGFnZSBlc3QgcG91ciBnXHUwMEU5cmVyIHZvdHJlIGhpc3RvcmlxdWUgZGUgbGlzdGUgZCdhbmltZSAoY2VsdWkgcXVpIHBldXQgXHUwMEVBdHJlIHV0aWxpc1x1MDBFOSBsb3JzIGRlIGxhIGNvbnN0cnVjdGlvbiBkZSBsYSBsaXN0ZSlcIixcclxuICAgICAgYW5pbWVIaXN0b3J5RGVzY3JpcHRpb24yOiBcImF0dGVudGlvbiA6IGxhIGNyb2l4IG5lIHN1cHByaW1lIHBhcyBsZSBmaWNoaWVyIG1haXMgc3VwcHJpbWUgbGUgbm9tIGRlIGwnYW5pbWUgZGFucyB2b3RyZSBoaXN0b3JpcXVlXCIsXHJcbiAgICAgIGNyZWF0ZWxpc3Q6IFwiQ3JcdTAwRTllciBsYSBsaXN0ZVwiLFxyXG4gICAgbm9MaXN0RXJyb3I6IFwidm91cyBkZXZleiBhY3RpdmVyIGxhIGxpc3RlIGRhbnMgbGVzIHBhcmFtXHUwMEU4dHJlcyBvdSBsYSBjclx1MDBFOWVyIGF2ZWMgbGEgY29tbWFuZGUgJ2NyZWF0ZS1hbmltZS1saXN0J1wiXHJcblxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGxldCBjdXJyZW50bGFuZyA9IG1vbWVudC5sb2NhbGUoKTtcclxuICBpZiAoY3VycmVudGxhbmcgIT09ICdlbicgJiYgY3VycmVudGxhbmcgIT09ICdmcicpIHtcclxuICAgIGN1cnJlbnRsYW5nID0gJ2VuJztcclxuICB9XHJcbiAgLy8gdHJhbnNsYXRpb24gZnVuY3Rpb24gXHJcbiAgZnVuY3Rpb24gdChrZXkpIHtcclxuICAgIGNvbnN0IHRyYW5zbGF0aW9uID0gdHJhbnNsYXRpb25zW2N1cnJlbnRsYW5nXVtrZXldIHx8IHRyYW5zbGF0aW9uc1snZW4nXVtrZXldO1xyXG4gICAgcmV0dXJuIHRyYW5zbGF0aW9uIHx8IGtleTtcclxuICB9XHJcbiAgXHJcbi8vdGVtcG9yYWlyZSBwb3VyIGF2b2lyIHVuZSBjb25maWd1cmF0aW9uIGRlIHRhZyBzdXBsXHUwMEU5bWVudGFpcmVcclxubGV0IGFkaXRpb25hbHRhZ3MgPSB7XHJcblx0dGFncyA6W1wiYW5pbWVcIiwgXCJjdWx0dXJlXCJdLFxyXG59O1xyXG4gXHJcbi8vIENyXHUwMEU5ZXIgdW5lIGNsYXNzZSBwb3VyIGxhIG1vZGFsXHJcbmNsYXNzIFRleHRQcm9tcHRNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICAgIHRleHQ6IHN0cmluZyA9ICcnO1xyXG4gICAgcmVzb2x2ZXI6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcCkge1xyXG4gICAgICAgIHN1cGVyKGFwcCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25PcGVuKCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCB7Y29udGVudEVsfSA9IHRoaXM7XHJcblx0XHRsZXQgdGl0bGUgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJyk7XHJcblx0XHR0aXRsZS50ZXh0Q29udGVudCA9IHQoJ2FkZFBhZ2VUaXRsZScpO1xyXG4gICAgICAgIGxldCB0ZXh0SW5wdXQgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2lucHV0Jywge3R5cGU6ICd0ZXh0J30pO1xyXG4gICAgICAgIHRleHRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsgdGhpcy50ZXh0ID0gdGV4dElucHV0LnZhbHVlOyB9KTtcclxuXHJcbiAgICAgICAgLy8gQ3JcdTAwRTllciB1biBib3V0b25cclxuICAgICAgICBsZXQgc3VibWl0QnV0dG9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7Y2xzOiAnbW9kLWN0YSd9KTtcclxuICAgICAgICBzdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0KCdzdWJtaXRCdXR0b24nKTtcclxuXHJcbiAgICAgICAgLy8gQWpvdXRlciB1biBnZXN0aW9ubmFpcmUgZCdcdTAwRTl2XHUwMEU5bmVtZW50cyBjbGljayBhdSBib3V0b25cclxuICAgICAgICBzdWJtaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEZlcm1lciBsYSBtb2RhbCBldCByXHUwMEU5c291ZHJlIGxhIHByb21lc3NlIGF2ZWMgbGEgdmFsZXVyIGRlIGxhIHpvbmUgZGUgdGV4dGVcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5yZXNvbHZlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZlcih0aGlzLnRleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICBsZXQge2NvbnRlbnRFbH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFqb3V0ZXIgdW5lIG1cdTAwRTl0aG9kZSBwb3VyIG9idGVuaXIgbGEgdmFsZXVyIGRlIGxhIHpvbmUgZGUgdGV4dGVcclxuICAgIGdldFZhbHVlKCk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlc29sdmVyID0gcmVzb2x2ZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufTtcclxuXHJcbmNsYXNzIGFuaW1lVGV4dHtcclxuXHRjb25zdHJ1Y3Rvcigpe1xyXG5cclxuXHR9XHJcblxyXG5cdGNyZWF0ZVRleHQoYW5pbWVEYXRhOiBKU09OLCBhbmltZU5hbWU6IHN0cmluZywgYWRpdGlvbmFsdGFnczogSlNPTil7XHJcblx0XHRsZXQgdGV4dCA9IFwiXCI7XHJcblx0XHR0ZXh0ICs9IFwiLS0tXFxuXCIgKyB0aGlzLmNyZWF0ZVRhZ3MoYW5pbWVEYXRhLGFuaW1lTmFtZSwgYWRpdGlvbmFsdGFncykrIFwiLS0tXFxuXCI7XHJcbiAgICAgICAgdGV4dCArPSBgIyBkZXNjcmlwdGlvbjogXFxuICR7YW5pbWVEYXRhLnN5bm9wc2lzfVxcbmA7XHJcblxyXG5cdFx0cmV0dXJuIHRleHQ7XHJcblx0fVxyXG5cclxuXHRjcmVhdGVUYWdzKGRhdGEgOiBKU09OICxhbmltZU5hbWU6IHN0cmluZywgYWRpdGlvbmFsdGFnczogSlNPTil7XHJcblx0XHRsZXQgdGFncyA9XCJ0YWdzOlxcblwiO1xyXG5cdFx0dGFncyArPSBgICAtICR7c3BhY2VyZW1vdmVyKGFuaW1lTmFtZSl9XFxuYDtcclxuXHRcdGFkaXRpb25hbHRhZ3MudGFncy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG5cdFx0XHQvLyB2b2lyIHNpIGlsIHkgYSB1biBlc3BhY2UgZGFucyBsZSB0YWcgZXQgbGUgcmVtcGxhY2VyIHBhciB1biB1bmRlcnNjb3JlXHJcblx0XHRcdGVsZW1lbnQgPSBzcGFjZXJlbW92ZXIoZWxlbWVudCk7XHJcblx0XHRcdHRhZ3MgKz0gYCAgLSAke2VsZW1lbnR9XFxuYDtcclxuXHRcdH0pO1xyXG5cdFx0ZGF0YS5nZW5yZXMuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuXHRcdFx0dGFncyArPSBgICAtICR7ZWxlbWVudC5uYW1lfVxcbmA7XHJcblx0XHR9KTtcclxuXHRcdGRhdGEudGhlbWVzLmZvckVhY2goZWxlbWVudCA9PiB7XHJcblx0XHRcdHRhZ3MgKz0gYCAgLSAke2VsZW1lbnQubmFtZX1cXG5gO1xyXG5cdFx0fSk7XHJcblx0XHRkYXRhLmRlbW9ncmFwaGljcy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG5cdFx0XHR0YWdzICs9IGAgIC0gJHtlbGVtZW50Lm5hbWV9XFxuYDtcclxuXHRcdH0pO1xyXG5cdFx0XHJcblxyXG5cdFx0Ly9wcmVuZHJlIGxlcyBkb25uXHUwMEU5ZXMgZGUgbCdhcGkgZXQgbGVzIG1ldHRyZSBkYW5zIGxlcyB0YWdzIGR1IGdlbnJlIGRlcyB0aFx1MDBFOG1lcyBldCBkZSBsYSBkXHUwMEU5bW9ncmFwaGllXHJcblx0XHRyZXR1cm4gdGFncztcclxuXHR9XHJcblx0XHJcblxyXG59O1xyXG5cclxuY2xhc3MgQW5pbWVIaXN0b3J5TW9sZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgcGx1Z2luOiBQbHVnaW47XHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBQbHVnaW4pIHtcclxuICAgICAgICBzdXBlcihhcHApO1xyXG4gICAgICAgIHRoaXMubW9kYWxFbC5hZGRDbGFzcygnYW5pbWUtaGlzdG9yeS1tb2RhbCcpO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgfVxyXG5cclxuICAgIG9uT3BlbigpIHtcclxuICAgICAgICBsZXQge2NvbnRlbnRFbH0gPSB0aGlzO1xyXG5cclxuICAgICAgICBsZXQgdGl0bGUgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJyk7XHJcbiAgICAgICAgdGl0bGUudGV4dENvbnRlbnQgPSB0KCdhbmltZUhpc3RvcnknKTtcclxuXHJcbiAgICAgICAgbGV0IGRlc2NyaXB0aW9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdwJywge2NsczogJ2Rlc2NyaXB0aW9uJ30pO1xyXG4gICAgICAgIGRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gdCgnYW5pbWVIaXN0b3J5RGVzY3JpcHRpb24xJyk7XHJcblxyXG4gICAgICAgIGRlc2NyaXB0aW9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdwJywge2NsczogJ2F2ZXJ0aXNzZW1lbnQnfSk7XHJcbiAgICAgICAgZGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSB0KCdhbmltZUhpc3RvcnlEZXNjcmlwdGlvbjInKTtcclxuXHJcbiAgICAgICAgbGV0IGxpc3QgPSBjb250ZW50RWwuY3JlYXRlRWwoJ3VsJyk7XHJcbiAgICAgICAgbGV0IGhpc3RvcnkgPSAodGhpcy5wbHVnaW4uc2V0dGluZ3MgYXMgYW5pbWVUb09ic2lkaWFuU2V0dGluZ3MpLmFuaW1lX2hpc3RvcnkgfHwgW107XHJcblxyXG4gICAgICAgIGhpc3RvcnkuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgbGV0IGxpc3RJdGVtID0gbGlzdC5jcmVhdGVFbCgnbGknLCB7Y2xzOiAnaGlzdG9yeS1pdGVtJ30pO1xyXG4gICAgICAgICAgICBsaXN0SXRlbS50ZXh0Q29udGVudCA9IGl0ZW0gKyBcIiBcIjtcclxuICAgICAgICAgICAgLy8gQWpvdXRlciB1biBib3V0b24gZGUgc3VwcHJlc3Npb24gcG91ciBjaGFxdWUgXHUwMEU5bFx1MDBFOW1lbnQgZGUgbCdoaXN0b3JpcXVlXHJcbiAgICAgICAgICAgIGxldCBkZWxldGVCdXR0b24gPSBsaXN0SXRlbS5jcmVhdGVFbCgnYnV0dG9uJywge2NsczogJ2RlbGV0ZS1idXR0b24nfSk7XHJcbiAgICAgICAgICAgIGRlbGV0ZUJ1dHRvbi50ZXh0Q29udGVudCA9ICdYJztcclxuICAgICAgICAgICAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gU3VwcHJpbWVyIGwnXHUwMEU5bFx1MDBFOW1lbnQgZGUgbCdoaXN0b3JpcXVlXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGhpc3RvcnkuaW5kZXhPZihpdGVtKTtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gRW5yZWdpc3RyZXIgbGVzIHBhcmFtXHUwMEU4dHJlcyBtaXMgXHUwMEUwIGpvdXJcclxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgLy8gTWV0dHJlIFx1MDBFMCBqb3VyIGwnYWZmaWNoYWdlIGRlIGxhIG1vZGFsXHJcbiAgICAgICAgICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub25PcGVuKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgbGV0IHtjb250ZW50RWx9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgYW5pbWVUb09ic2lkaWFuIGV4dGVuZHMgUGx1Z2luIHtcclxuICAgIHNldHRpbmdzOiBhbmltZVRvT2JzaWRpYW5TZXR0aW5ncyB8IHVua25vd247XHJcblxyXG4gICAgYXN5bmMgb25sb2FkKCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgICAgICAgIGlkOiAnb3Blbi1hbmltZS1oaXN0b3J5JyxcclxuICAgICAgICAgICAgbmFtZTogdCgnYW5pbWVIaXN0b3J5JyksXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbW9kYWwgPSBuZXcgQW5pbWVIaXN0b3J5TW9sZGFsKHRoaXMuYXBwLCB0aGlzKTtcclxuICAgICAgICAgICAgICAgIG1vZGFsLm9wZW4oKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgICAgICAgaWQ6ICdjcmVhdGUtYW5pbWUtbGlzdCcsXHJcbiAgICAgICAgICAgIG5hbWU6IHQoJ2NyZWF0ZWxpc3QnKSxcclxuICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghKHRoaXMuc2V0dGluZ3MgYXMgYW5pbWVUb09ic2lkaWFuU2V0dGluZ3MpLmxpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwieW91IG5lZWQgdG8gZW5hYmxlIHRoZSBsaXN0IGluIHRoZSBzZXR0aW5nc1wiKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGZpbGVQYXRoID0gKHRoaXMuc2V0dGluZ3MgYXMgYW5pbWVUb09ic2lkaWFuU2V0dGluZ3MpLmxpc3RQYXRoICsgXCIvXCIgKyAodGhpcy5zZXR0aW5ncyBhcyBhbmltZVRvT2JzaWRpYW5TZXR0aW5ncykubGlzdG5hbWUgKyBcIi5tZFwiO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBWXHUwMEU5cmlmaWVyIHNpIGxlIGZpY2hpZXIgZXhpc3RlIGRcdTAwRTlqXHUwMEUwXHJcbiAgICAgICAgICAgICAgICBpZiAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZmlsZVBhdGgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkZpbGUgYWxyZWFkeSBleGlzdHMuIERlbGV0aW5nIHRoZSBleGlzdGluZyBmaWxlLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBTdXBwcmltZXIgbGUgZmljaGllciBleGlzdGFudFxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVtb3ZlKGZpbGVQYXRoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgaGlzdG9yeSA9ICh0aGlzLnNldHRpbmdzIGFzIGFuaW1lVG9PYnNpZGlhblNldHRpbmdzKS5hbmltZV9oaXN0b3J5IHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRleHQgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgaGlzdG9yeS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQgKz0gYC0gWyBdIFtbJHtlbGVtZW50fV1dXFxuYDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IGZpbGUgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoKHRoaXMuc2V0dGluZ3MgYXMgYW5pbWVUb09ic2lkaWFuU2V0dGluZ3MpLmxpc3RQYXRoICsgXCIvXCIrICh0aGlzLnNldHRpbmdzIGFzIGFuaW1lVG9PYnNpZGlhblNldHRpbmdzKS5saXN0bmFtZSArIFwiLm1kXCIsIHRleHQpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigpO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgbGVhZi5vcGVuRmlsZShmaWxlKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgICAgICAgaWQ6ICdzdWJtaXQtYW5pbWUnLFxyXG4gICAgICAgICAgICBuYW1lOiB0KCdhZGRQYWdlVGl0bGUnKSxcclxuICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIEFmZmljaGVyIHVuZSBib1x1MDBFRXRlIGRlIGRpYWxvZ3VlIHBvdXIgZW50cmVyIGxlIHRpdHJlXHJcbiAgICAgICAgICAgICAgICBsZXQgbW9kYWwgPSBuZXcgVGV4dFByb21wdE1vZGFsKHRoaXMuYXBwKTtcclxuICAgICAgICAgICAgICAgIG1vZGFsLm9wZW4oKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBBdHRlbmRyZSBxdWUgbCd1dGlsaXNhdGV1ciBmZXJtZSBsYSBtb2RhbCBldCBvYnRlbmlyIGxhIHZhbGV1ciBkZSBsYSB6b25lIGRlIHRleHRlXHJcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBhd2FpdCBtb2RhbC5nZXRWYWx1ZSgpO1xyXG5cclxuXHJcblx0XHRcdFx0aWYodmFsdWUgIT0gXCJcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGlzdG9yeSA9ICh0aGlzLnNldHRpbmdzIGFzIGFuaW1lVG9PYnNpZGlhblNldHRpbmdzKS5hbmltZV9oaXN0b3J5IHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGhpc3RvcnkucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuc2V0dGluZ3MgYXMgYW5pbWVUb09ic2lkaWFuU2V0dGluZ3MpLmFuaW1lX2hpc3RvcnkgPSBoaXN0b3J5O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBFbnJlZ2lzdHJlciBsZXMgcGFyYW1cdTAwRTh0cmVzIG1pcyBcdTAwRTAgam91clxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoKHRoaXMuc2V0dGluZ3MgYXMgYW5pbWVUb09ic2lkaWFuU2V0dGluZ3MpLmxpc3QgJiYgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoKHRoaXMuc2V0dGluZ3MgYXMgYW5pbWVUb09ic2lkaWFuU2V0dGluZ3MpLmxpc3RQYXRoICsgXCIvXCIgKyAodGhpcy5zZXR0aW5ncyBhcyBhbmltZVRvT2JzaWRpYW5TZXR0aW5ncykubGlzdG5hbWUgKyBcIi5tZFwiKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaWxlID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKCh0aGlzLnNldHRpbmdzIGFzIGFuaW1lVG9PYnNpZGlhblNldHRpbmdzKS5saXN0UGF0aCArIFwiL1wiICsgKHRoaXMuc2V0dGluZ3MgYXMgYW5pbWVUb09ic2lkaWFuU2V0dGluZ3MpLmxpc3RuYW1lICsgXCIubWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCArPSBgLSBbIF0gW1ske3ZhbHVlfV1dXFxuYDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIGNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKHQoJ25vTGlzdEVycm9yJykpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHRcdFx0XHRcdC8vIENyXHUwMEU5ZXIgdW4gbm91dmVhdSBmaWNoaWVyIE1hcmtkb3duIGF2ZWMgbGUgdGl0cmUgY29tbWUgbm9tIGRlIGZpY2hpZXJcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZmlsZVBhdGggPSAodGhpcy5zZXR0aW5ncyBhcyBhbmltZVRvT2JzaWRpYW5TZXR0aW5ncykuYmFzZVBhdGggKyBcIi9cIiArIHZhbHVlICsgJy5tZCc7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpbGUgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZVBhdGgsICcnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ3JcdTAwRTllciB1biBub3V2ZWwgb25nbGV0IGV0IG91dnJpciBsZSBmaWNoaWVyIGRhbnMgY2V0IG9uZ2xldFxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBsZWFmLm9wZW5GaWxlKGZpbGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBPYnRlbmlyIGwnXHUwMEU5ZGl0ZXVyIGR1IGZpY2hpZXIgYWN0dWVsbGVtZW50IG91dmVydFxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGxlYWYudmlldyBpbnN0YW5jZW9mIE1hcmtkb3duVmlldykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZWRpdG9yID0gbGVhZi52aWV3LmVkaXRvcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtcGxhY2VyIGxlIHRleHRlIGRlIGwnXHUwMEU5ZGl0ZXVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZXh0ID0gbmV3IGFuaW1lVGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0VmFsdWUodGV4dC5jcmVhdGVUZXh0KGF3YWl0IGdldEFuaW1lRGF0YSh2YWx1ZSksIHZhbHVlLCBhZGl0aW9uYWx0YWdzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJkaWQgeW91IHR5cGUgbm90aGluZyA/IChlcnJvciA6IHZhcmlhYmxlIGlzIGVtcHR5KVwiKTtcclxuXHRcdFx0XHR9XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgYW5pbWVUb09ic2lkaWFuU2V0dGluZ3NUYWIodGhpcy5hcHAsIHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBvbnVubG9hZCgpIHtcclxuICAgICAgICAvLyBDb2RlIFx1MDBFMCBleFx1MDBFOWN1dGVyIGxvcnNxdWUgbCdleHRlbnNpb24gZXN0IGRcdTAwRTljaGFyZ1x1MDBFOWVcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBzcGFjZXJlbW92ZXIodGV4dDogc3RyaW5nKXtcclxuICAgIGxldCBuZXd0ZXh0ID0gXCJcIjtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGV4dC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmKHRleHRbaV0gPT0gXCIgXCIpe1xyXG4gICAgICAgICAgICBuZXd0ZXh0ICs9IFwiX1wiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG5ld3RleHQgKz0gdGV4dFtpXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3dGV4dDtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2V0QW5pbWVEYXRhKGFuaW1lTmFtZTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCByZXF1ZXN0OiBSZXF1ZXN0VXJsUGFyYW0gPSB7XHJcbiAgICAgICAgdXJsOiBgaHR0cHM6Ly9hcGkuamlrYW4ubW9lL3Y0L2FuaW1lP3E9JHthbmltZU5hbWV9JmxpbWl0PTFgLFxyXG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICB9O1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHJlcXVlc3QpO1xyXG5cclxuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIVFRQIGVycm9yISBzdGF0dXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHJldHVybiByZXNwb25zZS5qc29uLmRhdGFbMF07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBmZXRjaCBhbmltZSBkYXRhOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICB9XHJcbiAgICBcclxufSIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBhbmltZVRvT2JzaWRpYW4gZnJvbSAnLi9tYWluJztcclxuaW1wb3J0IHtsc30gZnJvbSAnLi9maWxlZmluZGVyJ1xyXG5cclxuXHJcbmNvbnN0IHRyYW5zbGF0aW9ucyA9IHtcclxuICBlbjoge1xyXG4gICAgYmFzZVBhdGg6ICdCYXNlIFBhdGgnLFxyXG4gICAgYmFzZVBhdGhEZXNjOiAnVGhlIGJhc2UgcGF0aCBmb3IgeW91ciBhbmltZSBsaXN0JyxcclxuICAgIGNoZWNrbGlzdDogJ0NoZWNrbGlzdCcsXHJcbiAgICBjaGVja2xpc3REZXNjOiAnRG8geW91IHdhbnQgdG8gbGlzdCB5b3VyIGFuaW1lPycsXHJcbiAgICBjaGVja2xpc3RQYXRoOiAnQ2hlY2tsaXN0IFBhdGgnLFxyXG4gICAgY2hlY2tsaXN0UGF0aERlc2M6ICdUaGUgcGF0aCB3aGVyZSB5b3Ugd2FudCB0byBjaGVja2xpc3QgeW91ciBhbmltZScsXHJcbiAgICBzZWxlY3RCYXNlUGF0aDogJ1NlbGVjdCBhIGJhc2UgcGF0aCcsXHJcbiAgICBzZWxlY3RMaXN0UGF0aDogJ1NlbGVjdCBhIGxpc3QgcGF0aCcsXHJcbiAgICBsaXN0bmFtZSA6ICdhbmltZSBsaXN0J1xyXG4gIH0sXHJcbiAgZnI6IHtcclxuICAgIGJhc2VQYXRoOiAnQ2hlbWluIGRlIGJhc2UnLFxyXG4gICAgYmFzZVBhdGhEZXNjOiAnTGUgY2hlbWluIGRlIGJhc2UgcG91ciB2b3RyZSBsaXN0ZSBkXFwnYW5pbWUnLFxyXG4gICAgY2hlY2tsaXN0OiAnTGlzdGUgZGVzIGFuaW1lcycsXHJcbiAgICBjaGVja2xpc3REZXNjOiAnVm91bGV6LXZvdXMgbGlzdGVyIHZvcyBhbmltZXMgZGFucyB1biBmaWNoaWVyID8nLFxyXG4gICAgY2hlY2tsaXN0UGF0aDogJ0NoZW1pbiBkZSBsYSBsaXN0ZScsXHJcbiAgICBjaGVja2xpc3RQYXRoRGVzYzogJ0xlIGNoZW1pbiBvXHUwMEY5IHZvdXMgdm91bGV6IGxpc3RlciB2b3MgYW5pbWVzJyxcclxuICAgIHNlbGVjdEJhc2VQYXRoOiAnU1x1MDBFOWxlY3Rpb25uZXogdW4gY2hlbWluIGRlIGJhc2UnLFxyXG4gICAgc2VsZWN0TGlzdFBhdGg6ICdTXHUwMEU5bGVjdGlvbm5leiB1biBjaGVtaW4gZGUgbGlzdGUnLFxyXG4gICAgbGlzdG5hbWUgOiAnbGlzdGUgZFxcJ2FuaW1lJ1xyXG4gIH1cclxufTtcclxuXHJcbmxldCBjdXJyZW50bGFuZyA9IG1vbWVudC5sb2NhbGUoKTtcclxuaWYgKGN1cnJlbnRsYW5nICE9PSAnZW4nICYmIGN1cnJlbnRsYW5nICE9PSAnZnInKSB7XHJcbiAgY3VycmVudGxhbmcgPSAnZW4nO1xyXG59XHJcbi8vIHRyYW5zbGF0aW9uIGZ1bmN0aW9uIFxyXG5mdW5jdGlvbiB0KGtleSkge1xyXG4gIGNvbnN0IHRyYW5zbGF0aW9uID0gdHJhbnNsYXRpb25zW2N1cnJlbnRsYW5nXVtrZXldIHx8IHRyYW5zbGF0aW9uc1snZW4nXVtrZXldO1xyXG4gIHJldHVybiB0cmFuc2xhdGlvbiB8fCBrZXk7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgYW5pbWVUb09ic2lkaWFuU2V0dGluZ3Mge1xyXG4gIGJhc2VQYXRoOiBzdHJpbmc7XHJcbiAgbGlzdCA6IGJvb2xlYW47XHJcbiAgbGlzdFBhdGg6IHN0cmluZztcclxuICBhbmltZXNfaGlzdG9yeSA6IEFycmF5PHN0cmluZz47XHJcbiAgbGlzdG5hbWUgOiBzdHJpbmc7XHJcblxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogYW5pbWVUb09ic2lkaWFuU2V0dGluZ3MgPSB7XHJcbiAgYmFzZVBhdGg6ICcnLFxyXG4gIGxpc3Q6IGZhbHNlLFxyXG4gIGxpc3RQYXRoOiAnJyxcclxuICBhbmltZXNfaGlzdG9yeTogW10sXHJcbiAgbGlzdG5hbWU6IHQoJ2xpc3RuYW1lJylcclxuICAgXHJcblxyXG59XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIGFuaW1lVG9PYnNpZGlhblNldHRpbmdzVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcbiAgICBwbHVnaW46IGFuaW1lVG9PYnNpZGlhbjtcclxuICBcclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IGFuaW1lVG9PYnNpZGlhbikge1xyXG4gICAgICBzdXBlcihhcHAsIHBsdWdpbik7XHJcbiAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcclxuICAgICAgbGV0IHtjb250YWluZXJFbH0gPSB0aGlzO1xyXG4gIFxyXG4gICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xyXG4gIFxyXG5cclxuICAgICAgY29uc3Qgb3B0aW9ucyA9IGxzKHRoaXMuYXBwLFwiZm9sZGVyXCIpO1xyXG4gIFxyXG4gICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAuc2V0TmFtZSh0KCdiYXNlUGF0aCcpKVxyXG4gICAgICAgIC5zZXREZXNjKHQoJ2Jhc2VQYXRoRGVzYycpKVxyXG4gICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XHJcbiAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJycsIHQoJ3NlbGVjdEJhc2VQYXRoJykpO1xyXG4gICAgICAgICAgb3B0aW9ucy5mb3JFYWNoKG9wdGlvbiA9PiB7XHJcbiAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihvcHRpb24sIG9wdGlvbik7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGRyb3Bkb3duLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmJhc2VQYXRoKTtcclxuICAgICAgICAgIGRyb3Bkb3duLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5iYXNlUGF0aCA9IHZhbHVlO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgIC5zZXROYW1lKHQoJ2NoZWNrbGlzdCcpKVxyXG4gICAgICAgICAgLnNldERlc2ModCgnY2hlY2tsaXN0RGVzYycpKVxyXG4gICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xyXG4gICAgICAgICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGlzdCk7XHJcbiAgICAgICAgICAgIHRvZ2dsZS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5saXN0ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAuc2V0TmFtZSh0KCdjaGVja2xpc3RQYXRoJykpXHJcbiAgICAgICAgICAuc2V0RGVzYyh0KCdjaGVja2xpc3RQYXRoRGVzYycpKVxyXG4gICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcclxuICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCcnLCB0KCdzZWxlY3RMaXN0UGF0aCcpKTtcclxuICAgICAgICAgICAgb3B0aW9ucy5mb3JFYWNoKG9wdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKG9wdGlvbiwgb3B0aW9uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRyb3Bkb3duLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmxpc3RQYXRoKTtcclxuICAgICAgICAgICAgZHJvcGRvd24ub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGlzdFBhdGggPSB2YWx1ZTtcclxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAuc2V0TmFtZSh0KCdsaXN0bmFtZScpKVxyXG4gICAgICAgICAgLnNldERlc2ModCgnbGlzdG5hbWUnKSlcclxuICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG4gICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIodCgnbGlzdG5hbWUnKSlcclxuICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmxpc3RuYW1lKVxyXG4gICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGlzdG5hbWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICBcclxuICAgICAgICAgIFxyXG5cclxuICAgIH1cclxuICB9IiwgImltcG9ydCB7IEFwcCwgVEFic3RyYWN0RmlsZSwgVEZvbGRlciwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuXHJcbmNvbnN0IG1heERlcHRoID0gMTAwO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGxzKGFwcDogQXBwLCBhc2tlZDogc3RyaW5nLCBjdXJyZW50Rm9sZGVyOiBURm9sZGVyID0gYXBwLnZhdWx0LmdldFJvb3QoKSBhcyBURm9sZGVyLCBjdXJyZW50RGVwdGg6IG51bWJlciA9IDApOiBzdHJpbmdbXSB7XHJcbiAgICBsZXQgbGlzdE9mRmlsZXM6IHN0cmluZ1tdID0gW107XHJcblxyXG4gICAgLy8gVlx1MDBFOXJpZmllciBzaSBsYSBwcm9mb25kZXVyIG1heGltYWxlIGEgXHUwMEU5dFx1MDBFOSBhdHRlaW50ZVxyXG4gICAgaWYgKGN1cnJlbnREZXB0aCA+IG1heERlcHRoKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpc3RPZkZpbGVzO1xyXG4gICAgfVxyXG5cclxuICAgIGN1cnJlbnRGb2xkZXIuY2hpbGRyZW4uZm9yRWFjaCgoZmlsZTogVEFic3RyYWN0RmlsZSkgPT4ge1xyXG4gICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG4gICAgICAgICAgICBpZiAoYXNrZWQgPT09IFwiZm9sZGVyXCIgfHwgYXNrZWQgPT09IFwiYWxsXCIgfHwgYXNrZWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgbGlzdE9mRmlsZXMucHVzaChmaWxlLnBhdGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFJlY2hlcmNoZSByXHUwMEU5Y3Vyc2l2ZSBkYW5zIGxlcyBzb3VzLWRvc3NpZXJzIGF2ZWMgdW5lIHByb2ZvbmRldXIgaW5jclx1MDBFOW1lbnRcdTAwRTllXHJcbiAgICAgICAgICAgIGxpc3RPZkZpbGVzID0gbGlzdE9mRmlsZXMuY29uY2F0KGxzKGFwcCwgYXNrZWQsIGZpbGUsIGN1cnJlbnREZXB0aCArIDEpKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG4gICAgICAgICAgICBpZiAoYXNrZWQgPT09IFwiZmlsZVwiIHx8IGFza2VkID09PSBcImFsbFwiIHx8IGFza2VkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGxpc3RPZkZpbGVzLnB1c2goZmlsZS5wYXRoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBsaXN0T2ZGaWxlcztcclxufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFTQSxJQUFBQSxtQkFBaUc7OztBQ1RqRyxJQUFBQyxtQkFBK0M7OztBQ0EvQyxzQkFBbUQ7QUFFbkQsSUFBTSxXQUFXO0FBRVYsU0FBUyxHQUFHLEtBQVUsT0FBZSxnQkFBeUIsSUFBSSxNQUFNLFFBQVEsR0FBYyxlQUF1QixHQUFhO0FBQ3JJLE1BQUksY0FBd0IsQ0FBQztBQUc3QixNQUFJLGVBQWUsVUFBVTtBQUN6QixXQUFPO0FBQUEsRUFDWDtBQUVBLGdCQUFjLFNBQVMsUUFBUSxDQUFDLFNBQXdCO0FBQ3BELFFBQUksZ0JBQWdCLHlCQUFTO0FBQ3pCLFVBQUksVUFBVSxZQUFZLFVBQVUsU0FBUyxVQUFVLFFBQVc7QUFDOUQsb0JBQVksS0FBSyxLQUFLLElBQUk7QUFBQSxNQUM5QjtBQUVBLG9CQUFjLFlBQVksT0FBTyxHQUFHLEtBQUssT0FBTyxNQUFNLGVBQWUsQ0FBQyxDQUFDO0FBQUEsSUFDM0UsV0FBVyxnQkFBZ0IsdUJBQU87QUFDOUIsVUFBSSxVQUFVLFVBQVUsVUFBVSxTQUFTLFVBQVUsUUFBVztBQUM1RCxvQkFBWSxLQUFLLEtBQUssSUFBSTtBQUFBLE1BQzlCO0FBQUEsSUFDSjtBQUFBLEVBQ0osQ0FBQztBQUVELFNBQU87QUFDWDs7O0FEdEJBLElBQU0sZUFBZTtBQUFBLEVBQ25CLElBQUk7QUFBQSxJQUNGLFVBQVU7QUFBQSxJQUNWLGNBQWM7QUFBQSxJQUNkLFdBQVc7QUFBQSxJQUNYLGVBQWU7QUFBQSxJQUNmLGVBQWU7QUFBQSxJQUNmLG1CQUFtQjtBQUFBLElBQ25CLGdCQUFnQjtBQUFBLElBQ2hCLGdCQUFnQjtBQUFBLElBQ2hCLFVBQVc7QUFBQSxFQUNiO0FBQUEsRUFDQSxJQUFJO0FBQUEsSUFDRixVQUFVO0FBQUEsSUFDVixjQUFjO0FBQUEsSUFDZCxXQUFXO0FBQUEsSUFDWCxlQUFlO0FBQUEsSUFDZixlQUFlO0FBQUEsSUFDZixtQkFBbUI7QUFBQSxJQUNuQixnQkFBZ0I7QUFBQSxJQUNoQixnQkFBZ0I7QUFBQSxJQUNoQixVQUFXO0FBQUEsRUFDYjtBQUNGO0FBRUEsSUFBSSxjQUFjLE9BQU8sT0FBTztBQUNoQyxJQUFJLGdCQUFnQixRQUFRLGdCQUFnQixNQUFNO0FBQ2hELGdCQUFjO0FBQ2hCO0FBRUEsU0FBUyxFQUFFLEtBQUs7QUFDZCxRQUFNLGNBQWMsYUFBYSxXQUFXLEVBQUUsR0FBRyxLQUFLLGFBQWEsSUFBSSxFQUFFLEdBQUc7QUFDNUUsU0FBTyxlQUFlO0FBQ3hCO0FBV08sSUFBTSxtQkFBNEM7QUFBQSxFQUN2RCxVQUFVO0FBQUEsRUFDVixNQUFNO0FBQUEsRUFDTixVQUFVO0FBQUEsRUFDVixnQkFBZ0IsQ0FBQztBQUFBLEVBQ2pCLFVBQVUsRUFBRSxVQUFVO0FBR3hCO0FBR08sSUFBTSw2QkFBTixjQUF5QyxrQ0FBaUI7QUFBQSxFQUc3RCxZQUFZLEtBQVUsUUFBeUI7QUFDN0MsVUFBTSxLQUFLLE1BQU07QUFDakIsU0FBSyxTQUFTO0FBQUEsRUFDaEI7QUFBQSxFQUVBLFVBQWdCO0FBQ2QsUUFBSSxFQUFDLFlBQVcsSUFBSTtBQUVwQixnQkFBWSxNQUFNO0FBR2xCLFVBQU0sVUFBVSxHQUFHLEtBQUssS0FBSSxRQUFRO0FBRXBDLFFBQUkseUJBQVEsV0FBVyxFQUNwQixRQUFRLEVBQUUsVUFBVSxDQUFDLEVBQ3JCLFFBQVEsRUFBRSxjQUFjLENBQUMsRUFDekIsWUFBWSxjQUFZO0FBQ3ZCLGVBQVMsVUFBVSxJQUFJLEVBQUUsZ0JBQWdCLENBQUM7QUFDMUMsY0FBUSxRQUFRLFlBQVU7QUFDeEIsaUJBQVMsVUFBVSxRQUFRLE1BQU07QUFBQSxNQUNuQyxDQUFDO0FBQ0QsZUFBUyxTQUFTLEtBQUssT0FBTyxTQUFTLFFBQVE7QUFDL0MsZUFBUyxTQUFTLE9BQU8sVUFBVTtBQUNqQyxhQUFLLE9BQU8sU0FBUyxXQUFXO0FBQ2hDLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxNQUNqQyxDQUFDO0FBQUEsSUFDSCxDQUFDO0FBRUQsUUFBSSx5QkFBUSxXQUFXLEVBQ3BCLFFBQVEsRUFBRSxXQUFXLENBQUMsRUFDdEIsUUFBUSxFQUFFLGVBQWUsQ0FBQyxFQUMxQixVQUFVLFlBQVU7QUFDbkIsYUFBTyxTQUFTLEtBQUssT0FBTyxTQUFTLElBQUk7QUFDekMsYUFBTyxTQUFTLE9BQU8sVUFBVTtBQUMvQixhQUFLLE9BQU8sU0FBUyxPQUFPO0FBQzVCLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxNQUNqQyxDQUFDO0FBQUEsSUFDSCxDQUFDO0FBR0gsUUFBSSx5QkFBUSxXQUFXLEVBQ3BCLFFBQVEsRUFBRSxlQUFlLENBQUMsRUFDMUIsUUFBUSxFQUFFLG1CQUFtQixDQUFDLEVBQzlCLFlBQVksY0FBWTtBQUN2QixlQUFTLFVBQVUsSUFBSSxFQUFFLGdCQUFnQixDQUFDO0FBQzFDLGNBQVEsUUFBUSxZQUFVO0FBQ3hCLGlCQUFTLFVBQVUsUUFBUSxNQUFNO0FBQUEsTUFDbkMsQ0FBQztBQUNELGVBQVMsU0FBUyxLQUFLLE9BQU8sU0FBUyxRQUFRO0FBQy9DLGVBQVMsU0FBUyxPQUFPLFVBQVU7QUFDakMsYUFBSyxPQUFPLFNBQVMsV0FBVztBQUNoQyxjQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsTUFDakMsQ0FBQztBQUFBLElBQ0gsQ0FBQztBQUVILFFBQUkseUJBQVEsV0FBVyxFQUNwQixRQUFRLEVBQUUsVUFBVSxDQUFDLEVBQ3JCLFFBQVEsRUFBRSxVQUFVLENBQUMsRUFDckIsUUFBUSxVQUFRLEtBQ2QsZUFBZSxFQUFFLFVBQVUsQ0FBQyxFQUM1QixTQUFTLEtBQUssT0FBTyxTQUFTLFFBQVEsRUFDdEMsU0FBUyxPQUFPLFVBQVU7QUFDekIsV0FBSyxPQUFPLFNBQVMsV0FBVztBQUNoQyxZQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsSUFDakMsQ0FBQyxDQUFDO0FBQUEsRUFJVjtBQUNGOzs7QUR2SEYsSUFBTUMsZ0JBQWU7QUFBQSxFQUNqQixJQUFJO0FBQUEsSUFDRixjQUFjO0FBQUEsSUFDZCxjQUFjO0FBQUEsSUFDZCxjQUFjO0FBQUEsSUFDZCwwQkFBeUI7QUFBQSxJQUN6QiwwQkFBMEI7QUFBQSxJQUMxQixZQUFZO0FBQUEsSUFDWixhQUFhO0FBQUEsRUFFZjtBQUFBLEVBQ0EsSUFBSTtBQUFBLElBQ0YsY0FBYztBQUFBLElBQ2QsY0FBYztBQUFBLElBQ2QsY0FBYztBQUFBLElBQ2QsMEJBQXlCO0FBQUEsSUFDekIsMEJBQTBCO0FBQUEsSUFDMUIsWUFBWTtBQUFBLElBQ2QsYUFBYTtBQUFBLEVBRWI7QUFDRjtBQUVBLElBQUlDLGVBQWMsT0FBTyxPQUFPO0FBQ2hDLElBQUlBLGlCQUFnQixRQUFRQSxpQkFBZ0IsTUFBTTtBQUNoRCxFQUFBQSxlQUFjO0FBQ2hCO0FBRUEsU0FBU0MsR0FBRSxLQUFLO0FBQ2QsUUFBTSxjQUFjRixjQUFhQyxZQUFXLEVBQUUsR0FBRyxLQUFLRCxjQUFhLElBQUksRUFBRSxHQUFHO0FBQzVFLFNBQU8sZUFBZTtBQUN4QjtBQUdGLElBQUksZ0JBQWdCO0FBQUEsRUFDbkIsTUFBTSxDQUFDLFNBQVMsU0FBUztBQUMxQjtBQUdBLElBQU0sa0JBQU4sY0FBOEIsdUJBQU07QUFBQSxFQUloQyxZQUFZLEtBQUs7QUFDYixVQUFNLEdBQUc7QUFKYixnQkFBZTtBQUFBLEVBS2Y7QUFBQSxFQUVBLFNBQVM7QUFFTCxRQUFJLEVBQUMsVUFBUyxJQUFJO0FBQ3hCLFFBQUksUUFBUSxVQUFVLFNBQVMsSUFBSTtBQUNuQyxVQUFNLGNBQWNFLEdBQUUsY0FBYztBQUM5QixRQUFJLFlBQVksVUFBVSxTQUFTLFNBQVMsRUFBQyxNQUFNLE9BQU0sQ0FBQztBQUMxRCxjQUFVLGlCQUFpQixTQUFTLE1BQU07QUFBRSxXQUFLLE9BQU8sVUFBVTtBQUFBLElBQU8sQ0FBQztBQUcxRSxRQUFJLGVBQWUsVUFBVSxTQUFTLFVBQVUsRUFBQyxLQUFLLFVBQVMsQ0FBQztBQUNoRSxpQkFBYSxjQUFjQSxHQUFFLGNBQWM7QUFHM0MsaUJBQWEsaUJBQWlCLFNBQVMsTUFBTTtBQUV6QyxXQUFLLE1BQU07QUFDWCxVQUFJLEtBQUssVUFBVTtBQUNmLGFBQUssU0FBUyxLQUFLLElBQUk7QUFBQSxNQUMzQjtBQUFBLElBQ0osQ0FBQztBQUFBLEVBQ0w7QUFBQSxFQUVBLFVBQVU7QUFDTixRQUFJLEVBQUMsVUFBUyxJQUFJO0FBQ2xCLGNBQVUsTUFBTTtBQUFBLEVBQ3BCO0FBQUE7QUFBQSxFQUdBLFdBQTRCO0FBQ3hCLFdBQU8sSUFBSSxRQUFRLGFBQVc7QUFDMUIsV0FBSyxXQUFXO0FBQUEsSUFDcEIsQ0FBQztBQUFBLEVBQ0w7QUFDSjtBQUVBLElBQU0sWUFBTixNQUFlO0FBQUEsRUFDZCxjQUFhO0FBQUEsRUFFYjtBQUFBLEVBRUEsV0FBVyxXQUFpQixXQUFtQkMsZ0JBQW9CO0FBQ2xFLFFBQUksT0FBTztBQUNYLFlBQVEsVUFBVSxLQUFLLFdBQVcsV0FBVSxXQUFXQSxjQUFhLElBQUc7QUFDakUsWUFBUTtBQUFBLEdBQXFCLFVBQVU7QUFBQTtBQUU3QyxXQUFPO0FBQUEsRUFDUjtBQUFBLEVBRUEsV0FBVyxNQUFhLFdBQW1CQSxnQkFBb0I7QUFDOUQsUUFBSSxPQUFNO0FBQ1YsWUFBUSxPQUFPLGFBQWEsU0FBUztBQUFBO0FBQ3JDLElBQUFBLGVBQWMsS0FBSyxRQUFRLGFBQVc7QUFFckMsZ0JBQVUsYUFBYSxPQUFPO0FBQzlCLGNBQVEsT0FBTztBQUFBO0FBQUEsSUFDaEIsQ0FBQztBQUNELFNBQUssT0FBTyxRQUFRLGFBQVc7QUFDOUIsY0FBUSxPQUFPLFFBQVE7QUFBQTtBQUFBLElBQ3hCLENBQUM7QUFDRCxTQUFLLE9BQU8sUUFBUSxhQUFXO0FBQzlCLGNBQVEsT0FBTyxRQUFRO0FBQUE7QUFBQSxJQUN4QixDQUFDO0FBQ0QsU0FBSyxhQUFhLFFBQVEsYUFBVztBQUNwQyxjQUFRLE9BQU8sUUFBUTtBQUFBO0FBQUEsSUFDeEIsQ0FBQztBQUlELFdBQU87QUFBQSxFQUNSO0FBR0Q7QUFFQSxJQUFNLHFCQUFOLGNBQWlDLHVCQUFNO0FBQUEsRUFFbkMsWUFBWSxLQUFVLFFBQWdCO0FBQ2xDLFVBQU0sR0FBRztBQUNULFNBQUssUUFBUSxTQUFTLHFCQUFxQjtBQUMzQyxTQUFLLFNBQVM7QUFBQSxFQUNsQjtBQUFBLEVBRUEsU0FBUztBQUNMLFFBQUksRUFBQyxVQUFTLElBQUk7QUFFbEIsUUFBSSxRQUFRLFVBQVUsU0FBUyxJQUFJO0FBQ25DLFVBQU0sY0FBY0MsR0FBRSxjQUFjO0FBRXBDLFFBQUksY0FBYyxVQUFVLFNBQVMsS0FBSyxFQUFDLEtBQUssY0FBYSxDQUFDO0FBQzlELGdCQUFZLGNBQWNBLEdBQUUsMEJBQTBCO0FBRXRELGtCQUFjLFVBQVUsU0FBUyxLQUFLLEVBQUMsS0FBSyxnQkFBZSxDQUFDO0FBQzVELGdCQUFZLGNBQWNBLEdBQUUsMEJBQTBCO0FBRXRELFFBQUksT0FBTyxVQUFVLFNBQVMsSUFBSTtBQUNsQyxRQUFJLFVBQVcsS0FBSyxPQUFPLFNBQXFDLGlCQUFpQixDQUFDO0FBRWxGLFlBQVEsUUFBUSxVQUFRO0FBQ3BCLFVBQUksV0FBVyxLQUFLLFNBQVMsTUFBTSxFQUFDLEtBQUssZUFBYyxDQUFDO0FBQ3hELGVBQVMsY0FBYyxPQUFPO0FBRTlCLFVBQUksZUFBZSxTQUFTLFNBQVMsVUFBVSxFQUFDLEtBQUssZ0JBQWUsQ0FBQztBQUNyRSxtQkFBYSxjQUFjO0FBQzNCLG1CQUFhLGlCQUFpQixTQUFTLE1BQU07QUFFekMsY0FBTSxRQUFRLFFBQVEsUUFBUSxJQUFJO0FBQ2xDLFlBQUksUUFBUSxJQUFJO0FBQ1osa0JBQVEsT0FBTyxPQUFPLENBQUM7QUFBQSxRQUMzQjtBQUVBLGFBQUssT0FBTyxhQUFhO0FBRXpCLGtCQUFVLE1BQU07QUFDaEIsYUFBSyxPQUFPO0FBQUEsTUFDaEIsQ0FBQztBQUFBLElBQ0wsQ0FBQztBQUFBLEVBQ0w7QUFBQSxFQUVBLFVBQVU7QUFDTixRQUFJLEVBQUMsVUFBUyxJQUFJO0FBQ2xCLGNBQVUsTUFBTTtBQUFBLEVBQ3BCO0FBQ0o7QUFFQSxJQUFxQixrQkFBckIsY0FBNkMsd0JBQU87QUFBQSxFQUdoRCxNQUFNLFNBQVM7QUFDWCxVQUFNLEtBQUssYUFBYTtBQUV4QixTQUFLLFdBQVc7QUFBQSxNQUNaLElBQUk7QUFBQSxNQUNKLE1BQU1BLEdBQUUsY0FBYztBQUFBLE1BQ3RCLFVBQVUsWUFBWTtBQUNsQixZQUFJLFFBQVEsSUFBSSxtQkFBbUIsS0FBSyxLQUFLLElBQUk7QUFDakQsY0FBTSxLQUFLO0FBQUEsTUFDZjtBQUFBLElBQ0osQ0FBQztBQUVELFNBQUssV0FBVztBQUFBLE1BQ1osSUFBSTtBQUFBLE1BQ0osTUFBTUEsR0FBRSxZQUFZO0FBQUEsTUFDcEIsVUFBVSxZQUFZO0FBQ2xCLFlBQUksQ0FBRSxLQUFLLFNBQXFDLE1BQU07QUFDbEQsY0FBSSx3QkFBTyw2Q0FBNkM7QUFDeEQ7QUFBQSxRQUNKO0FBRUEsWUFBSSxXQUFZLEtBQUssU0FBcUMsV0FBVyxNQUFPLEtBQUssU0FBcUMsV0FBVztBQUdqSSxZQUFJLE1BQU0sS0FBSyxJQUFJLE1BQU0sUUFBUSxPQUFPLFFBQVEsR0FBRztBQUMvQyxjQUFJLHdCQUFPLGtEQUFrRDtBQUU3RCxnQkFBTSxLQUFLLElBQUksTUFBTSxRQUFRLE9BQU8sUUFBUTtBQUFBLFFBQ2hEO0FBRUEsWUFBSSxVQUFXLEtBQUssU0FBcUMsaUJBQWlCLENBQUM7QUFDM0UsWUFBSSxPQUFPO0FBQ1gsZ0JBQVEsUUFBUSxhQUFXO0FBQ3ZCLGtCQUFRLFdBQVc7QUFBQTtBQUFBLFFBQ3ZCLENBQUM7QUFDRCxZQUFJLE9BQU8sTUFBTSxLQUFLLElBQUksTUFBTSxPQUFRLEtBQUssU0FBcUMsV0FBVyxNQUFNLEtBQUssU0FBcUMsV0FBVyxPQUFPLElBQUk7QUFDbkssWUFBSSxPQUFPLEtBQUssSUFBSSxVQUFVLFFBQVE7QUFDdEMsY0FBTSxLQUFLLFNBQVMsSUFBSTtBQUFBLE1BQzVCO0FBQUEsSUFDSixDQUFDO0FBRUQsU0FBSyxXQUFXO0FBQUEsTUFDWixJQUFJO0FBQUEsTUFDSixNQUFNQSxHQUFFLGNBQWM7QUFBQSxNQUN0QixVQUFVLFlBQVk7QUFFbEIsWUFBSSxRQUFRLElBQUksZ0JBQWdCLEtBQUssR0FBRztBQUN4QyxjQUFNLEtBQUs7QUFHWCxZQUFJLFFBQVEsTUFBTSxNQUFNLFNBQVM7QUFHN0MsWUFBRyxTQUFTLElBQUc7QUFDQyxnQkFBTSxVQUFXLEtBQUssU0FBcUMsaUJBQWlCLENBQUM7QUFDN0Usa0JBQVEsS0FBSyxLQUFLO0FBQ2xCLFVBQUMsS0FBSyxTQUFxQyxnQkFBZ0I7QUFHM0QsZ0JBQU0sS0FBSyxhQUFhO0FBRXhCLGNBQUksS0FBSyxTQUFxQyxRQUFRLE1BQU0sS0FBSyxJQUFJLE1BQU0sUUFBUSxPQUFRLEtBQUssU0FBcUMsV0FBVyxNQUFPLEtBQUssU0FBcUMsV0FBVyxLQUFLLEdBQUU7QUFDL00sZ0JBQUlDLFFBQU8sTUFBTSxLQUFLLElBQUksTUFBTSxzQkFBdUIsS0FBSyxTQUFxQyxXQUFXLE1BQU8sS0FBSyxTQUFxQyxXQUFXLEtBQUs7QUFDN0ssZ0JBQUksVUFBVSxNQUFNLEtBQUssSUFBSSxNQUFNLEtBQUtBLEtBQUk7QUFDNUMsdUJBQVcsV0FBVztBQUFBO0FBQ3RCLGtCQUFNLEtBQUssSUFBSSxNQUFNLE9BQU9BLE9BQU0sT0FBTztBQUFBLFVBQzdDLE9BQUs7QUFDRCxnQkFBSSx3QkFBT0QsR0FBRSxhQUFhLENBQUM7QUFBQSxVQUMvQjtBQUVBLGNBQUksV0FBWSxLQUFLLFNBQXFDLFdBQVcsTUFBTSxRQUFRO0FBQ25GLGNBQUksT0FBTyxNQUFNLEtBQUssSUFBSSxNQUFNLE9BQU8sVUFBVSxFQUFFO0FBR25ELGNBQUksT0FBTyxLQUFLLElBQUksVUFBVSxRQUFRO0FBQ3RDLGdCQUFNLEtBQUssU0FBUyxJQUFJO0FBR3hCLGNBQUcsS0FBSyxnQkFBZ0IsK0JBQWM7QUFDbEMsZ0JBQUksU0FBUyxLQUFLLEtBQUs7QUFFdkIsZ0JBQUksT0FBTyxJQUFJLFVBQVU7QUFDekIsbUJBQU8sU0FBUyxLQUFLLFdBQVcsTUFBTSxhQUFhLEtBQUssR0FBRyxPQUFPLGFBQWEsQ0FBQztBQUFBLFVBQ3BGO0FBQUEsUUFHaEIsT0FBTztBQUNOLGNBQUksd0JBQU8sb0RBQW9EO0FBQUEsUUFDaEU7QUFBQSxNQUVRO0FBQUEsSUFDSixDQUFDO0FBQ0QsU0FBSyxjQUFjLElBQUksMkJBQTJCLEtBQUssS0FBSyxJQUFJLENBQUM7QUFBQSxFQUNyRTtBQUFBLEVBRUEsTUFBTSxXQUFXO0FBQUEsRUFFakI7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNqQixTQUFLLFdBQVcsT0FBTyxPQUFPLENBQUMsR0FBRyxrQkFBa0IsTUFBTSxLQUFLLFNBQVMsQ0FBQztBQUFBLEVBQzdFO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDakIsVUFBTSxLQUFLLFNBQVMsS0FBSyxRQUFRO0FBQUEsRUFDckM7QUFDSjtBQUtBLFNBQVMsYUFBYSxNQUFhO0FBQy9CLE1BQUksVUFBVTtBQUNkLFdBQVMsSUFBSSxHQUFHLElBQUksS0FBSyxRQUFRLEtBQUs7QUFDbEMsUUFBRyxLQUFLLENBQUMsS0FBSyxLQUFJO0FBQ2QsaUJBQVc7QUFBQSxJQUNmLE9BQU87QUFDSCxpQkFBVyxLQUFLLENBQUM7QUFBQSxJQUNyQjtBQUFBLEVBQ0o7QUFDQSxTQUFPO0FBQ1g7QUFFQSxlQUFlLGFBQWEsV0FBbUI7QUFDM0MsUUFBTSxVQUEyQjtBQUFBLElBQzdCLEtBQUssb0NBQW9DO0FBQUEsSUFDekMsUUFBUTtBQUFBLEVBQ1o7QUFFQSxNQUFJO0FBQ0EsVUFBTSxXQUFXLFVBQU0sNkJBQVcsT0FBTztBQUV6QyxRQUFJLFNBQVMsV0FBVyxLQUFLO0FBQ3pCLFlBQU0sSUFBSSxNQUFNLHVCQUF1QixTQUFTLFFBQVE7QUFBQSxJQUM1RDtBQUdBLFdBQU8sU0FBUyxLQUFLLEtBQUssQ0FBQztBQUFBLEVBQy9CLFNBQVMsT0FBUDtBQUNFLFlBQVEsTUFBTSwrQkFBK0IsTUFBTSxTQUFTO0FBQUEsRUFDaEU7QUFFSjsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJ0cmFuc2xhdGlvbnMiLCAiY3VycmVudGxhbmciLCAidCIsICJhZGl0aW9uYWx0YWdzIiwgInQiLCAiZmlsZSJdCn0K
